<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R Crash Course for Biologists, 2nd Edition</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-HZY3MS2C2R"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-HZY3MS2C2R', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="https://EcoEvoGeno.org" class="navbar-brand navbar-brand-logo">
    <img src="./ColauttiLabLogo.png" alt="Colautti Lab logo" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="https://EcoEvoGeno.org">
    <span class="navbar-title">R Crash Course for Biologists, 2nd Edition</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-introduction" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Introduction</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-introduction">    
        <li>
    <a class="dropdown-item" href="./index.html">
 <span class="dropdown-text">Book Info</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./preface.html">
 <span class="dropdown-text">Preface</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-basics" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Basics</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-basics">    
        <li>
    <a class="dropdown-item" href="./fundamentals.html">
 <span class="dropdown-text">R Fundamentals</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./visualizations.html">
 <span class="dropdown-text">Quick Visualizations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rmarkdown.html">
 <span class="dropdown-text">R Markdown</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-more-graphs" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">More Graphs</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-more-graphs">    
        <li>
    <a class="dropdown-item" href="./customizations.html">
 <span class="dropdown-text">Basic Customization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./advanced_vis.html">
 <span class="dropdown-text">Advanced Visualizations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./multiplot.html">
 <span class="dropdown-text">Multi-plot Graphs</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-advanced" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Advanced</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-advanced">    
        <li>
    <a class="dropdown-item" href="./datascience.html">
 <span class="dropdown-text">Data Science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./flowcontrol.html">
 <span class="dropdown-text">Flow Control</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./regex.html">
 <span class="dropdown-text">Regular Expressions I</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./regex2.html">
 <span class="dropdown-text">Regular Expressions II</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./customfunctions.html">
 <span class="dropdown-text">Custom Functions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./matrices.html">
 <span class="dropdown-text">Matrices</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./conclusion.html"> 
<span class="menu-text">Conclusion</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#version-control" id="toc-version-control" class="nav-link active" data-scroll-target="#version-control">Version Control</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#repository" id="toc-repository" class="nav-link" data-scroll-target="#repository">Repository</a></li>
  <li><a href="#readme.md" id="toc-readme.md" class="nav-link" data-scroll-target="#readme.md">Readme.md</a></li>
  <li><a href="#github-account" id="toc-github-account" class="nav-link" data-scroll-target="#github-account">GitHub Account</a></li>
  <li><a href="#install-git" id="toc-install-git" class="nav-link" data-scroll-target="#install-git">Install Git</a></li>
  <li><a href="#step-1-github-repo" id="toc-step-1-github-repo" class="nav-link" data-scroll-target="#step-1-github-repo">Step 1: GitHub Repo</a></li>
  <li><a href="#step-2-r-project" id="toc-step-2-r-project" class="nav-link" data-scroll-target="#step-2-r-project">Step 2: R Project</a></li>
  </ul></li>
  <li><a href="#git-tab" id="toc-git-tab" class="nav-link" data-scroll-target="#git-tab"><code>Git</code> tab</a>
  <ul class="collapse">
  <li><a href="#commit" id="toc-commit" class="nav-link" data-scroll-target="#commit">Commit</a></li>
  <li><a href="#branches" id="toc-branches" class="nav-link" data-scroll-target="#branches">Branches</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="version-control" class="level1">
<h1>Version Control</h1>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Take a moment to reflect on everything you learned if you got this far! Congratulations, it really is impressive!</p>
<p>Now it’s time to learn how to show off your skill to the rest of the world, keep track of important analyses, and collaborate with other R coders. In this chapter you’ll create and maintain your own code <em>repository</em> on a (free) website called GitHub. You’ll learn how to use GitHub with R Studio to create, modify, and maintain your code online.</p>
<p>As your coding skills continue to develop, repositories will become crucial for sharing and collaborating on projects. For example, the repository for your a thesis or peer-reviewed manuscript may include many different data sets, R programs, and R markdown documents. As your projects get more complicated with multiple collaborators, it can help to have <em>Version Control</em> to decide which changes to keep and which to exclude.</p>
</section>
<section id="repository" class="level2">
<h2 class="anchored" data-anchor-id="repository">Repository</h2>
<p>A <em>repository</em>, sometimes shortened to just <em>repo</em>, is just a hard drive somewhere that stores your code. <em>GitHub</em> (<em><a href="https://GitHub.com" class="uri">https://GitHub.com</a></em>) is a website that makes it easy to create and manage your repositories, and decide which ones to make available to the public. The word GitHub comes from a programming tool called <em>git</em>, which provides a protocol for communicating between your computer and your online repository.</p>
<p>Git and GitHub are useful for sharing code and collaborating on projects. But you can use your GitHub site as an online CV or Resume to raise your profile and get noticed by potential employers. For example, here is a link to my GitHub site: <em><a href="https://github.com/colauttilab" class="uri">https://github.com/colauttilab</a></em></p>
<p>And here is an example of a public repository for a published paper on SARS-CoV-2 genome evolution during the early stages of the COVID-19 pandemic: <em><a href="https://github.com/ColauttiLab/SARS-CoV_Phylogenomics" class="uri">https://github.com/ColauttiLab/SARS-CoV_Phylogenomics</a></em></p>
<p>If you go to the SARS-Cov-2 repository, you’ll see a list of folders and files that make up the GitHub repository. Think of this as your Project Folder in R. Later, we’ll see how to use special protocols to sync this folder to your computer, and decide which changes to keep or reject.</p>
</section>
<section id="readme.md" class="level2">
<h2 class="anchored" data-anchor-id="readme.md">Readme.md</h2>
<p>Take note of one specific file, called <code>Readme.md</code>. All repositories should include a well-documented readme file.</p>
<p>If you scroll down, you’ll see a description of the analysis pipeline, including a flowchart diagram and some additional notes. This is all generated from the <code>Readme.md</code> file. The <code>md</code> stands for ‘markdown’ and it is very similar to the R markdown (<code>.Rmd</code>) format discussed in the first part of this book. That’s because R markdown is built on the markdown language. The main difference is that a regular markdown file won’t render R code. However, you can still use different text formatting (including a special font for code), and add images and hyperlinks.</p>
</section>
<section id="github-account" class="level2">
<h2 class="anchored" data-anchor-id="github-account">GitHub Account</h2>
<p>Now that you understand the basics, Make a (free) account at <em><a href="https://GitHub.com" class="uri">https://GitHub.com</a></em></p>
<p>You will need to choose a unique user name. Take some time to add a headshot or picture that represents you, and add some basic details to your profile. Just taking a few minutes to do this will help your account stand out from the many other generic accounts on GitHub. Remember that this is your public-facing profile that might be seen by potential collaborators, employers, or recruiters, so keep it professional.</p>
</section>
<section id="install-git" class="level2">
<h2 class="anchored" data-anchor-id="install-git">Install Git</h2>
<p>The <code>git</code> program will help us communicate with GitHub to update our files, or search for updates submitted by other users. You can downoad it at <em><a href="http://git-scm.com/downloads" class="uri">http://git-scm.com/downloads</a></em></p>
<p>Be sure to quit R and R Studio before you install <code>git</code>. After it is installed, open R Studio and choose <strong><code>Global Options</code></strong> from the <strong><code>Tools</code></strong> menu. Then, click on <strong>Git/SVN</strong> on the left and the <strong>Enable version control interface for RStudio projects</strong> at the top.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/globaloptions.png" class="img-fluid figure-img" alt="Global Options Menu"></p>
<figcaption>Global Options Menu</figcaption>
</figure>
</div>
<p>You may also need to specify the location of your <strong>Git executable</strong> by clicking the <strong><code>Browse</code></strong> button. Here, you should link to the <code>git</code> (OSX) or <code>git.exe</code> (Windows) that you installed. If you have trouble locating the follow, try this</p>
<ul>
<li>(<strong>Windows</strong>): Search for ‘Command Prompt’ from your Start Menu and type: <code>where git</code></li>
<li>(<strong>Mac OS &amp; Linux</strong>): Open the ‘Terminal’ window and type: <code>which git</code></li>
</ul>
<p>That’s it! Now you should be ready to set up your repository.</p>
</section>
<section id="step-1-github-repo" class="level2">
<h2 class="anchored" data-anchor-id="step-1-github-repo">Step 1: GitHub Repo</h2>
<p>open a web browser and navigate to your GitHub website. It should be something like <em>github.com/username</em> where username is the GitHub user name you chose when you set up your account.</p>
<p>Click on <strong><code>Repositories</code></strong> near the top of your github page, then click the green button that says <strong><code>New</code></strong> and give your repository a name that you can easily remember.</p>
<p>Add a short description, and select the options to add a <code>README</code> and <code>.gitignore</code> file.</p>
<p>You may select a license if you would like to protect your code. You should do this when writing original code, but for now we are just creating a repository to explore how GitHub works.</p>
<p>Finally, click <strong><code>Create repository</code></strong> and copy the full web address for your repository. It should be a web link that starts with <code>GitHub.com</code> and end with <code>.git</code>. This is the link that R Studio will use to sync your GitHub repository with your local computer.</p>
</section>
<section id="step-2-r-project" class="level2">
<h2 class="anchored" data-anchor-id="step-2-r-project">Step 2: R Project</h2>
<p>Create a new project in R Studio from the menu <strong><code>File--&gt;New Project</code></strong> but be sure to select <strong><code>Version Control</code></strong> and then click <strong><code>Git</code></strong> – note that it is written sideways with a red ‘i’ and green ‘t’.</p>
<p>Paste the GitHub link into the <strong><code>Repository URL:</code></strong> field. This tells R Studio where to find the repository on GitHub.</p>
<blockquote class="blockquote">
<p><strong>Note</strong>: If your repository URL didn’t copy properly, you can just add <code>.git</code> to the end of the web link for your repository. For example, if your repository is <em><a href="https://GitHub.com/username/FirstRepo" class="uri">https://GitHub.com/username/FirstRepo</a></em> then the link in R Studio should be <em><a href="https://GitHub.com/username/FirstRepo.git" class="uri">https://GitHub.com/username/FirstRepo.git</a></em></p>
</blockquote>
<p>Use the <strong><code>Browse</code></strong> button to choose where you would like to save the project file on your local computer.</p>
<p>You can leave <strong><code>Project Directory Name</code></strong> alone so that the project folder name on your computer matches the repository name on GitHub. You can change it, but this may cause you confusion later.</p>
</section>
</section>
<section id="git-tab" class="level1">
<h1><code>Git</code> tab</h1>
<p>R Studio has a specific <code>Git</code> tab for managing repositories with <code>git</code>. By default, it is usually one of the tabs in the top-right window of R Studio, in the same window as <code>Environment and History</code>. However, it may have moved if you changed your R Studio settings.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/gittab.png" class="img-fluid figure-img" alt="Close-up view of the Git Tab in R Studio"></p>
<figcaption>Close-up view of the Git Tab in R Studio</figcaption>
</figure>
</div>
<p>The <code>Git</code> tab will probably be empty when you first set up your project following the steps in the previous section.</p>
<p>The first thing you should do, right away, is click on the blue down arrow labelled <em>Pull</em> . You may be prompted to enter or confirm your password, and then R Studio will download or ‘pull’ the latest versions of the files in your repository from GitHub to your computer. It’s good practice to do this first, before you start editing, to make sure you are working with the latest file versions.</p>
<p>The rest of the git menu might look a bit complicated, but are just three main buttons at the top of the Git tab that you should know: <em>Pull</em>, <em>Commit</em> and <em>Push</em>. To understand what these mean, let’s first think about how we will typically work with an online repository.</p>
<p>Right now, you have a project folder on your computer that is a copy of the repository you made on GitHub. In git lingo, we say that these are the same <em>version</em>. If you start making changes on your computer, your <em>version</em> of the repository will change on your computer, but not on GitHub. There are some good reasons not to have things synchronized. First, you may want to work somewhere without stable internet access. Second, you might want to try out different things on your computer, but then clean them up before you release them back to the public. You may also have several people working on the same files, in which case you may want to review all the changes and decide which changes will be rolled back into the official version on GitHub.</p>
<p>The <em>Pull</em>, <em>Commit</em> and <em>Push</em> commands are used to manage the different versions that can exist on different computers.</p>
<ul>
<li><p><strong>Pull</strong> – use this to pull the latest files and commits from GitHub.It’s generally good practice to pull changes every time you work on a project, to make sure you are working with the latest version.</p></li>
<li><p><strong>Commit</strong> – use this to commit the changes you make. Commits are like pressing ‘save’ on your computer, except that each commit gets a unique code, which makes it possible for you to roll back to previous commits.</p></li>
<li><p><strong>Push</strong> – use this to push your commits to GitHub. It’s generally a good idea to do this when you are done working on the project for a while. This will allow your collaborators to pull your changes from GitHub before they start working on their piece.</p></li>
</ul>
<p>Now, try making changes to your <code>README.md</code> file. For example, you apply what you learned in the R Markdown chapter to add a header:</p>
<pre><code># My First Repo</code></pre>
<p>Now watch the <code>Git</code> tab and save the changes on your computer. You should see the <code>README.md</code> appear in the window, telling you that changes have been made to the file on your computer. Note that this didn’t appear until <em>after</em> you saved the changes.</p>
<p>These changes are saved on your computer, but not on GitHub. To change the GitHub version to match this version, we need to first <em>Commit</em> or confirm that we want to document these changes, then <em>Push</em> or upload the changes to GitHub.</p>
<section id="commit" class="level2">
<h2 class="anchored" data-anchor-id="commit">Commit</h2>
<p>To commit changes, click on the check box under the <strong><code>Staged</code></strong> column for the files you want to commit. In this case, there is just one. Then, click the <strong><code>Commit</code></strong> button in the menu bar of the <code>Git</code> window.</p>
<p>A new window will pop up to show you the changes you have made. Additions are highlighted in green and deletions are highlighted in red. You also have to add a short note in the text box under <strong><code>Commit message</code></strong> to explain what changes were made. This can be anything and it doesn’t have to be long, but it will help you keep track of the different versions of your code.</p>
<p>After reviewing the changes and adding a commit message, click the <code>Commit</code> button. You might choose to do this separately for different files, so that each one can have its own commit message. Finally, click the <code>Push</code> button to upload the changes to GitHub.</p>
<blockquote class="blockquote">
<p><strong>Note</strong>: It can take a few minutes for the GitHub website to update these changes. You also might have to refresh your browser to see the changes.</p>
</blockquote>
</section>
<section id="branches" class="level2">
<h2 class="anchored" data-anchor-id="branches">Branches</h2>
<p>You can think of a git repository as a sort of timeline, with each commit saved as a separate point along the timeline, or <em>branch</em>. You can see these past versions in R Studio with the <em><code>History</code></em> button in the <code>Git</code> tab.</p>
<p>If you find that you’ve made a fatal mistake, you revert back to a previous version along the branch.</p>
<p>If two or more people work on the same files, they create different <em>branches</em> that each have an origin and an endpoint. Changes in these branches can be <em>merged</em> back to the <em>main</em> (or sometimes <em>master</em>) branch.</p>
<p>Each version has its own unique ID code, called a Secure Hash Algorithm (<em>SHA</em>) code. This can be helpful with reproducibility since your main branch can change, but each commit is unique. You can see SHA, commit notes, and the version author for each commit in the <code>History</code> window.</p>
<p>And that’s really all you need to know. Like everything else in this book, it can take a bit of practice and a lot of mistakes to get a good understanding of git and GitHub. However, I’ve found it to be an invaluable tool and I use it regularly for my students’ theses and peer-reviewed manuscripts, as well as my ‘lab resourses’ website (Colauttilab.GitHub.io) and this book!</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>R Crash Course for Biologists</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p><a href="https://EcoEvoGeno.org/">Robert I Colautti</a></p>
</div>
  </div>
</footer>




</body></html>