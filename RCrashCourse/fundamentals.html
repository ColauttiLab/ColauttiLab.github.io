<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R Crash Course for Biologists, 2nd Edition</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-HZY3MS2C2R"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-HZY3MS2C2R', { 'anonymize_ip': true});
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="https://EcoEvoGeno.org" class="navbar-brand navbar-brand-logo">
    <img src="./ColauttiLabLogo.png" alt="Colautti Lab logo" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="https://EcoEvoGeno.org">
    <span class="navbar-title">R Crash Course for Biologists, 2nd Edition</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-introduction" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Introduction</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-introduction">    
        <li>
    <a class="dropdown-item" href="./index.html">
 <span class="dropdown-text">Book Info</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./preface.html">
 <span class="dropdown-text">Preface</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-basics" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Basics</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-basics">    
        <li>
    <a class="dropdown-item" href="./fundamentals.html">
 <span class="dropdown-text">R Fundamentals</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./visualizations.html">
 <span class="dropdown-text">Quick Visualizations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rmarkdown.html">
 <span class="dropdown-text">R Markdown</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-more-graphs" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">More Graphs</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-more-graphs">    
        <li>
    <a class="dropdown-item" href="./customizations.html">
 <span class="dropdown-text">Basic Customization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./advanced_vis.html">
 <span class="dropdown-text">Advanced Visualizations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./multiplot.html">
 <span class="dropdown-text">Multi-plot Graphs</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-advanced" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Advanced</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-advanced">    
        <li>
    <a class="dropdown-item" href="./datascience.html">
 <span class="dropdown-text">Data Science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./flowcontrol.html">
 <span class="dropdown-text">Flow Control</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./regex.html">
 <span class="dropdown-text">Regular Expressions I</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./regex2.html">
 <span class="dropdown-text">Regular Expressions II</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./customfunctions.html">
 <span class="dropdown-text">Custom Functions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./matrices.html">
 <span class="dropdown-text">Matrices</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./conclusion.html"> 
<span class="menu-text">Conclusion</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#r-fundamentals" id="toc-r-fundamentals" class="nav-link active" data-scroll-target="#r-fundamentals">R Fundamentals</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#r-basics" id="toc-r-basics" class="nav-link" data-scroll-target="#r-basics">R Basics</a>
  <ul class="collapse">
  <li><a href="#basic-math" id="toc-basic-math" class="nav-link" data-scroll-target="#basic-math">Basic Math</a></li>
  <li><a href="#objects-functions" id="toc-objects-functions" class="nav-link" data-scroll-target="#objects-functions">Objects &amp; Functions</a></li>
  <li><a href="#c" id="toc-c" class="nav-link" data-scroll-target="#c"><code>c()</code></a></li>
  <li><a href="#math-functions" id="toc-math-functions" class="nav-link" data-scroll-target="#math-functions">Math Functions</a></li>
  <li><a href="#roundtruncate" id="toc-roundtruncate" class="nav-link" data-scroll-target="#roundtruncate">Round/Truncate</a></li>
  <li><a href="#rounding-rule" id="toc-rounding-rule" class="nav-link" data-scroll-target="#rounding-rule">Rounding Rule</a></li>
  <li><a href="#logic-operators" id="toc-logic-operators" class="nav-link" data-scroll-target="#logic-operators">Logic Operators</a></li>
  <li><a href="#group-comparisons" id="toc-group-comparisons" class="nav-link" data-scroll-target="#group-comparisons">Group Comparisons</a></li>
  <li><a href="#congrats" id="toc-congrats" class="nav-link" data-scroll-target="#congrats">Congrats!</a></li>
  </ul></li>
  <li><a href="#use-for-help" id="toc-use-for-help" class="nav-link" data-scroll-target="#use-for-help">Use <code>?</code> for HELP</a>
  <ul class="collapse">
  <li><a href="#description" id="toc-description" class="nav-link" data-scroll-target="#description">Description</a></li>
  <li><a href="#usage" id="toc-usage" class="nav-link" data-scroll-target="#usage">Usage</a></li>
  <li><a href="#arguments" id="toc-arguments" class="nav-link" data-scroll-target="#arguments">Arguments</a></li>
  <li><a href="#value" id="toc-value" class="nav-link" data-scroll-target="#value">Value</a></li>
  <li><a href="#details" id="toc-details" class="nav-link" data-scroll-target="#details">Details</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a></li>
  </ul></li>
  <li><a href="#random-numbers" id="toc-random-numbers" class="nav-link" data-scroll-target="#random-numbers">Random Numbers</a>
  <ul class="collapse">
  <li><a href="#uniform" id="toc-uniform" class="nav-link" data-scroll-target="#uniform">Uniform</a></li>
  <li><a href="#gaussian" id="toc-gaussian" class="nav-link" data-scroll-target="#gaussian">Gaussian</a></li>
  <li><a href="#poisson" id="toc-poisson" class="nav-link" data-scroll-target="#poisson">Poisson</a></li>
  <li><a href="#binomial" id="toc-binomial" class="nav-link" data-scroll-target="#binomial">Binomial</a></li>
  <li><a href="#other" id="toc-other" class="nav-link" data-scroll-target="#other">Other</a></li>
  </ul></li>
  <li><a href="#repeat-replicate-sample" id="toc-repeat-replicate-sample" class="nav-link" data-scroll-target="#repeat-replicate-sample">Repeat, Replicate &amp; Sample</a></li>
  <li><a href="#set.seed" id="toc-set.seed" class="nav-link" data-scroll-target="#set.seed"><code>set.seed()</code></a></li>
  <li><a href="#combining-objects" id="toc-combining-objects" class="nav-link" data-scroll-target="#combining-objects">Combining Objects</a></li>
  <li><a href="#sequence" id="toc-sequence" class="nav-link" data-scroll-target="#sequence">Sequence</a></li>
  <li><a href="#rows-and-columns" id="toc-rows-and-columns" class="nav-link" data-scroll-target="#rows-and-columns">Rows and Columns</a>
  <ul class="collapse">
  <li><a href="#congrats-again" id="toc-congrats-again" class="nav-link" data-scroll-target="#congrats-again">Congrats, Again!</a></li>
  </ul></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types">Data Types</a></li>
  <li><a href="#objects-variables" id="toc-objects-variables" class="nav-link" data-scroll-target="#objects-variables">Objects &amp; Variables</a>
  <ul class="collapse">
  <li><a href="#elements-cells" id="toc-elements-cells" class="nav-link" data-scroll-target="#elements-cells">Elements (Cells)</a></li>
  <li><a href="#vector" id="toc-vector" class="nav-link" data-scroll-target="#vector">Vector</a></li>
  <li><a href="#matrices" id="toc-matrices" class="nav-link" data-scroll-target="#matrices">Matrices</a></li>
  <li><a href="#arrays" id="toc-arrays" class="nav-link" data-scroll-target="#arrays">Arrays</a></li>
  </ul></li>
  <li><a href="#lists" id="toc-lists" class="nav-link" data-scroll-target="#lists">Lists</a>
  <ul class="collapse">
  <li><a href="#subset" id="toc-subset" class="nav-link" data-scroll-target="#subset">Subset</a></li>
  </ul></li>
  <li><a href="#print-and-paste" id="toc-print-and-paste" class="nav-link" data-scroll-target="#print-and-paste"><code>print()</code> and <code>paste()</code></a></li>
  <li><a href="#external-files" id="toc-external-files" class="nav-link" data-scroll-target="#external-files">External Files</a>
  <ul class="collapse">
  <li><a href="#working-directory" id="toc-working-directory" class="nav-link" data-scroll-target="#working-directory">Working Directory</a></li>
  <li><a href="#absolute-path" id="toc-absolute-path" class="nav-link" data-scroll-target="#absolute-path">Absolute Path</a></li>
  <li><a href="#relative-path" id="toc-relative-path" class="nav-link" data-scroll-target="#relative-path">Relative Path</a></li>
  </ul></li>
  <li><a href="#r-projects" id="toc-r-projects" class="nav-link" data-scroll-target="#r-projects">R Projects</a></li>
  <li><a href="#import-data" id="toc-import-data" class="nav-link" data-scroll-target="#import-data">Import Data</a>
  <ul class="collapse">
  <li><a href="#data.frame" id="toc-data.frame" class="nav-link" data-scroll-target="#data.frame"><code>data.frame</code></a></li>
  <li><a href="#subset-1" id="toc-subset-1" class="nav-link" data-scroll-target="#subset-1">Subset</a></li>
  <li><a href="#new-columns" id="toc-new-columns" class="nav-link" data-scroll-target="#new-columns">New Columns</a></li>
  </ul></li>
  <li><a href="#other-functions" id="toc-other-functions" class="nav-link" data-scroll-target="#other-functions">Other Functions</a>
  <ul class="collapse">
  <li><a href="#unique" id="toc-unique" class="nav-link" data-scroll-target="#unique"><code>unique()</code></a></li>
  <li><a href="#duplicated" id="toc-duplicated" class="nav-link" data-scroll-target="#duplicated"><code>duplicated()</code></a></li>
  <li><a href="#aggregate" id="toc-aggregate" class="nav-link" data-scroll-target="#aggregate"><code>aggregate()</code></a></li>
  <li><a href="#tapply" id="toc-tapply" class="nav-link" data-scroll-target="#tapply"><code>tapply()</code></a></li>
  <li><a href="#sapply-lapply" id="toc-sapply-lapply" class="nav-link" data-scroll-target="#sapply-lapply"><code>sapply()</code> &amp; <code>lapply()</code></a></li>
  </ul></li>
  <li><a href="#tidyverse" id="toc-tidyverse" class="nav-link" data-scroll-target="#tidyverse">Tidyverse</a></li>
  <li><a href="#save" id="toc-save" class="nav-link" data-scroll-target="#save">Save</a>
  <ul class="collapse">
  <li><a href="#output-folder" id="toc-output-folder" class="nav-link" data-scroll-target="#output-folder">Output Folder</a></li>
  </ul></li>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages">Packages</a>
  <ul class="collapse">
  <li><a href="#installing" id="toc-installing" class="nav-link" data-scroll-target="#installing">Installing</a></li>
  <li><a href="#loading" id="toc-loading" class="nav-link" data-scroll-target="#loading">Loading</a></li>
  </ul></li>
  <li><a href="#readable-code" id="toc-readable-code" class="nav-link" data-scroll-target="#readable-code">Readable Code</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="r-fundamentals" class="level1">
<h1>R Fundamentals</h1>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This chapter provides a rapid breakdown of the core functionality of R. There is a lot to cover in a very short time. You may be tempted to skip over some of these sections, but this chapter forms the foundation of future chapters. If you don’t have a solid foundation, you will have trouble building your coding skills. Remember that you can only learn coding through repetition. Take the extra time and make the effort to type out each code and run it in your console.</p>
<p><strong>I can’t stress this enough</strong>: It is important that you physically participate and code along with the examples. Type everything out. The physical act of typing into R and troubleshooting any errors you get is a crucial part of the learning process.</p>
<p>It’s very likely you will sometimes get a different result, such as a warning or error message. Don’t get frustrated! Think of it as an opportunity to work on you debugging skills. Check to make sure you don’t have any typos, like the letter <code>l</code> and the number <code>1</code>, or <code>\</code> vs <code>/</code>, or missing spaces or other changes that may be hard to spot visually. If you are getting a warning, read it carefully.</p>
</section>
<section id="r-basics" class="level2">
<h2 class="anchored" data-anchor-id="r-basics">R Basics</h2>
<p>Make comments inside your code with the hash mark <code>#</code>. When you type this character, it tells the R program to ignore everything that comes after it.</p>
<p>Documentation is an important part of coding. It takes a bit of extra time to write, but it will save you a lot of time. Careful documentation will be essential when coding collaboratively, even if your collaborator is you when you wrote code six months back.</p>
<p>It’s ok to play around with code to get it working, but once you have a piece you are happy with, be sure to go back and add documentation.</p>
<p>Later, we will see how to use R markdown to provide more attractive documents for reproducible analysis. But for dedicated programs, you can get creative with characters to help make long documentation more readable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use hastags to make comments - not read by the R console</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use other characters and blank lines to improve readability:</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------- </span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># My first R script </span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Today's Date</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a summary description of what the script does</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># This script will...</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># And annotate individual parts of the script</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="basic-math" class="level3">
<h3 class="anchored" data-anchor-id="basic-math">Basic Math</h3>
<p>You can do basic mathematical equations in R. Many of us choose to become biologists because we aren’t comfortable with mathematical equations, only to find out later how important math is for biology! As we’ll see later, coding can help to demystify mathematical equations. Let’s start with some basics:</p>
<blockquote class="blockquote">
<p><em>Yes, type these out and look at the output!</em></p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">+</span> <span class="dv">2</span> <span class="co"># add</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">-</span> <span class="dv">2</span> <span class="co"># subtract</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">*</span> <span class="dv">2</span> <span class="co"># multiply</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">/</span> <span class="dv">2</span> <span class="co"># divide</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">^</span> <span class="dv">2</span> <span class="co"># exponent</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">%%</span> <span class="dv">2</span> <span class="co"># modulo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>Question</strong>: Did you type this out? If not, you missed something important. Go back to the beginning of the book and read more carefully.</p>
</blockquote>
<p>The modulo <code>%%</code> is one you may not be familiar with, but it comes in really handy in a lot of coding contexts. The modulo is just the remainder of a division. So <code>10 %% 2</code> returns a zero because 2 divides into 10 five times, but <code>10 %% 3</code> returns a 1 because three divides into 10 three times with 1 remainder.</p>
<p>This can be useful to determine whether a number (<code>x</code>) is even (i.e.&nbsp;if <code>x %% 2</code> returns zero).</p>
<blockquote class="blockquote">
<p><strong>Tip</strong>: To get more practice, use R instead of your calculator app whenever you need to calculate something. It seems silly to go through the trouble to open R Studio to calculate a few numbers, but it will get you comfortable using R and R Studio, which will pay off in the long run..</p>
</blockquote>
</section>
<section id="objects-functions" class="level3">
<h3 class="anchored" data-anchor-id="objects-functions">Objects &amp; Functions</h3>
<p><strong>Objects</strong> and <strong>functions</strong> are the bread and butter of the R programming language. An object can take many forms, but is generally assigned <em>from</em> an <em>input</em> or <em>to</em> an <em>output</em>. This could include a letter or a number, or a set of letters or numbers, or a set of letters and numbers, or more structured types of objects that link together more complex forms of information.</p>
<p>Objects are manipulated with <strong>functions</strong>. Each function has a unique name followed by a set of parentheses, which are used to define input and <strong>parameters</strong> that are used by the function, including inputs and outputs.</p>
<p>In fact, there is a function called <code>function()</code>. Yes, there is a function in R called <em>function</em>, and you can use it to write your own custom functions, but we’ll save that for later.</p>
<p>For now, just remember that functions have brackets. Brackets are used to define input and parameters that the function uses to produce output.</p>
<blockquote class="blockquote">
<p><strong>Warning</strong>: Do not put a space between the function name and the opening bracket <code>(</code> or you will generate an error.</p>
</blockquote>
</section>
<section id="c" class="level3">
<h3 class="anchored" data-anchor-id="c"><code>c()</code></h3>
<p>The <strong>concatenate</strong> function <code>c()</code> is a very simple yet important and common function in R. Use it to group items together.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 5</code></pre>
</div>
</div>
<p>In this function, the numbers 1, 2, 3, and 5 are the input parameters. Each number is itself an object in R.</p>
<p>The output is a type of <strong>object</strong> called a <strong>vector</strong> that contains four <strong>elements</strong>. The <code>c()</code> function takes four separate objects (elements) and combines them into a new object (vector). If this seems weird, take a few minutes to think it through because this difference will be important later.</p>
<p>Think of a vector as part of a row or column in a spreadsheet, and an element as one of the cells, as shown in <strong>Figure 1.1</strong>. We can also have more complex objects that are equivalent to entire spreadsheets, or a combination of multiple spreadsheets and other kinds of structured data.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/vector.png" class="img-fluid figure-img" alt="Vectors contain elements"></p>
<figcaption>Vectors contain elements</figcaption>
</figure>
</div>
</section>
<section id="math-functions" class="level3">
<h3 class="anchored" data-anchor-id="math-functions">Math Functions</h3>
<p>Here are some functions for common mathematical calculations. Type these out and then try changing some of the numbers in brackets to get a feel for them:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">abs</span>(<span class="sc">-</span><span class="dv">10</span>) <span class="co"># absolute value</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">10-1</span>) <span class="co"># square root (with subtraction)</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">10</span>) <span class="co"># natural log</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">log10</span>(<span class="dv">10</span>) <span class="co"># log base 10</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="dv">1</span>) <span class="co"># power of e</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sin</span>(pi<span class="sc">/</span><span class="dv">2</span>) <span class="co"># sine function</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">asin</span>(<span class="dv">1</span>) <span class="co"># inverse sine</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cos</span>(pi) <span class="co"># cosine</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">acos</span>(<span class="sc">-</span><span class="dv">1</span>) <span class="co"># inverse cosine</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tan</span>(<span class="dv">0</span>) <span class="co"># tangent</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">atan</span>(<span class="dv">0</span>) <span class="co"># inverse tangent</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>Note that <code>pi</code> is a special object containing the digits of pi. Try typing <code>pi</code> in the R Console and pressing <strong><code>Enter</code></strong>.</p>
</blockquote>
</section>
<section id="roundtruncate" class="level3">
<h3 class="anchored" data-anchor-id="roundtruncate">Round/Truncate</h3>
<p>We can use R for rounding and truncating numbers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(pi, <span class="at">digits=</span><span class="dv">3</span>) <span class="co"># standard rounding to 3 digits</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.142</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">floor</span>(pi) <span class="co"># round down to closest whole number</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ceiling</span>(pi) <span class="co"># round up to closest whole number</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">signif</span>(pi, <span class="at">digits=</span><span class="dv">2</span>) <span class="co"># round to keep 2 significant digits</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.1</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Pro-tip</strong>: <code>round()</code> with <code>digits=3</code> is a great function to avoid clutter when generating output for your reports, manuscripts, theses, and other scientific documents.</p>
</blockquote>
<p>Later, we’ll look at how to generate reports that incorporate code (e.g.&nbsp;statistical analyses) that you can quickly update with new data. Rounding the output of your R code with <code>round()</code> makes for much cleaner, and more readable reports. More than three digits may be necessary in a few cases, but in most cases it just adds unnecessary clutter.</p>
</section>
<section id="rounding-rule" class="level3">
<h3 class="anchored" data-anchor-id="rounding-rule">Rounding Rule</h3>
<p><strong>Question</strong>: What’s the proper way to round a number that ends with 5 (e.g.&nbsp;1.5, 2.5, 3.5, 4.5)?</p>
<p>A Twitter by evolutionary entomologist Dr.&nbsp;Stephen B. Heard reveals some confusion about this rule, as shown in <strong>Figure 1.2</strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/heard_tweet.png" class="img-fluid figure-img" alt="A Twitter poll from Stephen Heard showing confusion about rounding rules, which we can investigate in R"></p>
<figcaption>A Twitter poll from Stephen Heard showing confusion about rounding rules, which we can investigate in R</figcaption>
</figure>
</div>
<p><strong>Answer</strong>: One convention is to round the nearest <em>even</em> number. But, this is not the only convention you’ll see.</p>
<p>R has the answer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">c</span>(<span class="fl">1.5</span>,<span class="fl">2.5</span>,<span class="fl">3.5</span>,<span class="fl">4.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 2 4 4</code></pre>
</div>
</div>
<p>Rounding numbers can produce some unexpected results. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">2.675</span>,<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.67</code></pre>
</div>
</div>
<p>Why not 2.68? The reason is the way that programming languages store numbers with decimals. These are called <em>float</em> numbers and they way they are encoded in memory can cause very slight deviations in the numbers. In this case, 2.675 is stored as 2.67499999999999982236431605997495353221893310546875, which is close enough for most calculations. However, it’s just slightly smaller than 2.675, which causes it to round down to 2.7 instead of up to 2.8 – these small differences usually don’t matter much, but in more advanced calculations they can be important. For example, models that use probabilities often add log-probabilities rather than multiply raw probabilities to avoid multiplying very small numbers that can be problematic for computers. The key is to carefully review the output of your programs and double-check your calculations.</p>
<p>Notice how we <em>nested</em> a function inside of another function. We wrote a concatenate <code>c()</code> function to generate a <em>vector</em> of four <em>elements</em>. We then put that function inside of the <code>round()</code> function. The round function applied the rounding algorithm separately to each of the four elements created by <code>c()</code>, generating a vector output containing four elements – one rounded number for each of the four input numbers. This may be a bit tricky to understand, but we’ll work through more examples in this book.</p>
</section>
<section id="logic-operators" class="level3">
<h3 class="anchored" data-anchor-id="logic-operators">Logic Operators</h3>
<p>An <strong>operator</strong> is used to compare objects. We’ll use these a lot when we start writing our own custom programs and functions. It also comes in handy for sub-setting your data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">&gt;</span> <span class="dv">2</span> <span class="co"># greater than</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">2</span> <span class="co"># less than</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">&lt;=</span> <span class="dv">2</span> <span class="co"># less than or equal to</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">==</span> <span class="dv">1</span> <span class="co"># equal to</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">==</span> <span class="dv">2</span> <span class="sc">|</span> <span class="dv">1</span> <span class="sc">==</span> <span class="dv">1</span> <span class="co"># | means 'OR'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> <span class="dv">1</span> <span class="sc">==</span> <span class="dv">1</span> <span class="co"># &amp; means 'AND' </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> <span class="dv">1</span> <span class="sc">==</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>We can also use<code>!</code> as a negation/inverse operator</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">!=</span> <span class="dv">1</span> <span class="co"># not equal to</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</section>
<section id="group-comparisons" class="level3">
<h3 class="anchored" data-anchor-id="group-comparisons">Group Comparisons</h3>
<p>Instead of the vertical bar character <code>|</code>, you can use <code>%in%</code> with <code>c()</code> to check a large number of values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="congrats" class="level3">
<h3 class="anchored" data-anchor-id="congrats">Congrats!</h3>
<p>Before we move on to the next section, take a second to look back at all the coding skills you’ve already learned: documenting code, basic math, working with objects and functions, combining objects, some advanced math functions, and comparing objects. Well done!</p>
<p>Seriously, you already know enough write your own R program! Try it!</p>
<ol type="1">
<li>Make a new file: <code>File--&gt;New File--&gt;R Script</code></li>
<li>Write some code – try to use as many concepts above as you can.</li>
<li>Don’t forget your documentation!</li>
<li>Save the file</li>
<li>Run the file and look at the output</li>
<li>Debug any errors and warning messages.</li>
<li>Show off your program to your friends and family</li>
</ol>
<p>You are a coder now! Let’s take your skills to the next level.</p>
</section>
</section>
<section id="use-for-help" class="level2">
<h2 class="anchored" data-anchor-id="use-for-help">Use <code>?</code> for HELP</h2>
<p>Whenever you are learning a new function, you should use <code>?</code> and carefully read about all the parameters and outputs. The explanations can be a bit technical, which is intimidating at first. But after enough practice you will start to understand more and more of the descriptions. Let’s break it down:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>?round</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>Note</strong>: In R Studio, the help will open in a separate ‘Help’ tab (lower, right panel in the default view)</p>
</blockquote>
<section id="description" class="level3">
<h3 class="anchored" data-anchor-id="description">Description</h3>
<p>The description gives a general overview of the function. In this case, <code>round()</code> is one of a set of related functions, which are all described together in the same help file</p>
</section>
<section id="usage" class="level3">
<h3 class="anchored" data-anchor-id="usage">Usage</h3>
<p>This shows the general form of the function that is run in the R Console.</p>
</section>
<section id="arguments" class="level3">
<h3 class="anchored" data-anchor-id="arguments">Arguments</h3>
<p>This explains the ‘arguments’ of the function, which are the input values and parameters. In the case of <code>round</code> the arguments include a numeric vector <code>x</code> as input and <code>digits</code> as a parameter.</p>
</section>
<section id="value" class="level3">
<h3 class="anchored" data-anchor-id="value">Value</h3>
<p>This help doesn’t have a <strong>Value</strong> subheading, but more complex functions do. For example, try <code>?lm</code> to see the help for linear models. Values are objects created by the function as output. For example, the model <code>coefficients</code> and <code>residuals</code> are separate objects of a linear model created by the <code>lm()</code> function.</p>
</section>
<section id="details" class="level3">
<h3 class="anchored" data-anchor-id="details">Details</h3>
<p>This explains the function(s) in greater detail, and is worth reading the first few times you use a function.</p>
</section>
<section id="examples" class="level3">
<h3 class="anchored" data-anchor-id="examples">Examples</h3>
<p>This section gives examples as reproducible code, which you can copy-paste right into your terminal.</p>
<p>To conclude, always read the help <strong>carefully</strong> when you first use a function. It’s normal to keep referring to the help every time you use a function that you aren’t too familiar with. It’s also normal that you might not understand everything in the help file. Just do your best and be persistent and over time it will start to make more sense to you. You will find these get easier as you read about more functions and try to apply whatever you can understand.</p>
</section>
</section>
<section id="random-numbers" class="level2">
<h2 class="anchored" data-anchor-id="random-numbers">Random Numbers</h2>
<p>The ability to quickly and efficiently generate random numbers has a lot of useful applications for biologists. What are some examples?</p>
<ol type="1">
<li>Generating random numbers as part of an experimental design.</li>
<li>Simulating ‘noise’ or stochastic processes in a biological model.</li>
<li>Developing a null model for statistical significance testing.</li>
<li>Exploring ‘parameter space’ in a Maximum Likelihood model or a Markov Chain Monte Carlo simulation.</li>
</ol>
<p>It is very easy to generate some random numbers in R, from a variety of different sampling distributions.</p>
<p>These are covered in more detail in the <em>Distributions Chapter</em> of the book <em>R STATS Crash Course for Biologists</em> , which is part of a different book (R Stats Crash Course for Biologists). For now, we’ll just focus on generating random numbers.</p>
<section id="uniform" class="level3">
<h3 class="anchored" data-anchor-id="uniform">Uniform</h3>
<p>Perhaps the simplest random number is a whole number (i.e.&nbsp;no decimal) drawn from a <strong>uniform distribution</strong>, meaning that each number has an equal probability of being selected.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="at">n=</span><span class="dv">10</span>, <span class="at">min=</span><span class="dv">0</span>, <span class="at">max=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.1117100 0.6569272 0.8211328 0.2509286 0.3734155 0.6324161 0.3697382
 [8] 0.9881294 0.5996457 0.2274557</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Note that your randomly chosen numbers will be different from the ones randomly chosen here.</p>
</blockquote>
<p>The <code>runif()</code> function here uses 3 parameters:</p>
<ol type="1">
<li><code>n</code> – the number of random values to generate</li>
<li><code>min</code> – the minimum value that can be chosen</li>
<li><code>max</code> – the maximum value that can be chosen.</li>
</ol>
<p>We’ll talk more about parameters later.</p>
</section>
<section id="gaussian" class="level3">
<h3 class="anchored" data-anchor-id="gaussian">Gaussian</h3>
<p>One of the most common random distributions in biology is the <strong>Gaussian distribution</strong> with parameters for <code>mean</code> and <code>sd</code> (standard deviation). Rational numbers (i.e.&nbsp;with decimal) closer to the mean are more likely to be chosen, with sd defining probability of sampling a value far above or below the mean value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="at">mean=</span><span class="dv">0</span>, <span class="at">sd=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  0.03593779  1.28266635  1.08966908  0.74950488  1.21493109 -0.04426062
 [7]  1.32068115 -0.20525943 -0.01895848  1.02895996</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Side note</strong>: Look what we did here. We wrote <code>10</code> instead of <code>n=10</code> and the function still works! In fact, we can get away with:</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">10</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] -0.56314215  0.07072185 -0.44125894  0.15320699 -0.64631668 -1.36350796
 [7]  1.86823425  1.60473928  0.13220764 -0.87088755</code></pre>
</div>
</div>
<p>You can figure out the order by reading the help (<code>?</code>) for the function. When you are starting out, it’s a good idea to type the extra characters to specify the parameter names to avoid bugs in your code. It also makes the code more readable to others.</p>
</section>
<section id="poisson" class="level3">
<h3 class="anchored" data-anchor-id="poisson">Poisson</h3>
<p>A <strong>poisson distribution</strong> includes only whole numbers with a parameter <code>lambda</code>, which is analogous to the mean in the normal distribution.</p>
<p>Poisson distributions are common for count data in biology – seed or egg number, for example.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rpois</span>(<span class="dv">10</span>, <span class="at">lambda=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  8 13 11 10  7 17 18  9 11  8</code></pre>
</div>
</div>
</section>
<section id="binomial" class="level3">
<h3 class="anchored" data-anchor-id="binomial">Binomial</h3>
<p>The <strong>binomial distribution</strong> is useful for binary outcomes – variables with only two possibilities, which can coded as 0 or 1 (or true/false). The <code>size</code> parameter is the number of events (e.g.&nbsp;number of coin flips), and the <code>prob</code> parameter is the probability of getting a 1 each time.</p>
<p>Binomial distributions are commonly used in population genetics (e.g.&nbsp;sampling alleles with different frequencies).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbinom</span>(<span class="dv">10</span>, <span class="at">size=</span><span class="dv">1</span>, <span class="at">prob=</span><span class="fl">0.5</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0 1 0 0 1 0 0 0 1 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbinom</span>(<span class="dv">10</span>, <span class="at">size=</span><span class="dv">10</span>, <span class="at">prob=</span><span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 4 7 3 6 4 4 3 5 3 5</code></pre>
</div>
</div>
</section>
<section id="other" class="level3">
<h3 class="anchored" data-anchor-id="other">Other</h3>
<p>Here are a few other random distributions you might be familiar with:</p>
<table class="table">
<thead>
<tr class="header">
<th>Distribution</th>
<th>R function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Chi-Squared</td>
<td><code>chisq()</code></td>
</tr>
<tr class="even">
<td>t</td>
<td><code>t()</code></td>
</tr>
<tr class="odd">
<td>F</td>
<td><code>F()</code></td>
</tr>
<tr class="even">
<td>Exponential</td>
<td><code>exp</code></td>
</tr>
<tr class="odd">
<td>Log-Normal</td>
<td><code>Lognormal</code></td>
</tr>
<tr class="even">
<td>Logistic</td>
<td><code>Logistic</code></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="repeat-replicate-sample" class="level2">
<h2 class="anchored" data-anchor-id="repeat-replicate-sample">Repeat, Replicate &amp; Sample</h2>
<p>In addition to drawing random numbers from defined distributions, it is often helpful to sample from a defined input vector.</p>
<p>For example, maybe we want to generate a data frame with alternating rows for Treatment and Control. We can use the <code>rep()</code> function to repeat values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"Treatment"</span>,<span class="st">"Control"</span>),<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Treatment" "Control"   "Treatment" "Control"   "Treatment" "Control"  </code></pre>
</div>
</div>
<p>Or maybe we want to repeat a function, such as sampling from a normal distribution and calculating the mean of the sample. We could try <code>rep()</code> again.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">mean</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>)),<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.04046735 -0.04046735 -0.04046735</code></pre>
</div>
</div>
<p>Note that your numbers will probably be different, due to random sampling. But there is a problem.</p>
<blockquote class="blockquote">
<p><strong>Question</strong>: What is wrong with this output?</p>
</blockquote>
<p><strong>Answer</strong>: We are not repeating the nested function <code>mean(rnorm())</code>. Instead, we are just running it once and repeating the output.</p>
<p>To repeat the function, we use <code>replicate()</code> instead of <code>rep()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">replicate</span>(<span class="dv">3</span>,<span class="fu">mean</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.030529408  0.004617699 -0.003606109</code></pre>
</div>
</div>
<p>Instead of repeating and replicating, we may want a random sample from our input vector. There are two ways to draw a random sample:</p>
<ol type="1">
<li><p><strong>With Replacement</strong> – Randomly sample along the vector and allow for the same element to be sampled more than one. To remember this, imagine each element is a marble in a bag. When your select a specific marble, you <em>replace</em> it in the bag so that it can be sampled again.</p></li>
<li><p><strong>Without Replacement</strong> – Randomly reshuffle the elements of a vector. Imagine that marbles do not get replaced in the bag, so that each element can be sampled only once.</p></li>
</ol>
<p>Sample <em>with</em> replacement</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),<span class="dv">10</span>,<span class="at">replace=</span>T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  5 10  9  3  6  6  8 10  6  9</code></pre>
</div>
</div>
<p>Sample <em>without</em> replacement</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),<span class="dv">10</span>,<span class="at">replace=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  5  6  7  8 10  4  3  1  2  9</code></pre>
</div>
</div>
</section>
<section id="set.seed" class="level2">
<h2 class="anchored" data-anchor-id="set.seed"><code>set.seed()</code></h2>
<p><strong>Fun fact</strong>: random numbers generated by a computer are not truly random. Instead, the numbers involve a calculation that require a starting number called a <strong>seed</strong>. The seed might be the current Year/Month/Day/Hour/Minute/Second/Millisecond, which means the ‘random’ number could be determined by somebody who knows the equation and the precise time it was executed.</p>
<p>In practice, computer-generated random numbers are much more ‘random’ than numbers ‘randomly’ chosen by a human mind.</p>
<p>We can also take advantage of a computer’s pseudo-random number generation by defining the <strong>seed</strong> number. This can help with testing and debugging our code, and for writing code for research that is 100% reproducible. With the same seed, anyone can generate the exact same “random” numbers. We do this with the <code>set.seed()</code> function.</p>
<p>Compare these outputs:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4395633 0.3930605 0.4975544 0.9320028 0.5169364</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.39510560 0.03523317 0.94210203 0.92165593 0.47039949</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">3</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1680415 0.8075164 0.3849424 0.3277343 0.6021007</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">3</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1680415 0.8075164 0.3849424 0.3277343 0.6021007</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">172834782</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.13729290 0.18587365 0.01860484 0.88440060 0.21414154</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">172834782</span>)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.13729290 0.18587365 0.01860484 0.88440060 0.21414154</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.19787402 0.84870074 0.27303904 0.12225215 0.08365613</code></pre>
</div>
</div>
<p>See how the same ‘random’ numbers are generated with the same seed?</p>
</section>
<section id="combining-objects" class="level2">
<h2 class="anchored" data-anchor-id="combining-objects">Combining Objects</h2>
<p>Returning now to the concatenation function, we saw how to use use <code>c()</code> to concatenate single objects.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 5</code></pre>
</div>
</div>
<p>We can also <em>nest</em> functions, for example we can use <code>c()</code> inside of another concatenate function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">48</span>,<span class="dv">49</span>,<span class="dv">50</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  2  5 48 49 50</code></pre>
</div>
</div>
<p>If we need to concatenate a range of whole numbers, we can simplify with the colon <strong><code>:</code></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">100</span><span class="sc">:</span><span class="dv">90</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 100  99  98  97  96  95  94  93  92  91  90</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1  0  1</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Question</strong>: How could you use this to generate a set of numbers from -1.0 to 1.0 in increments of 0.1? You already have all the coding knowledge you need to do this! You just have to try combining two of the things you have learned so far.</p>
</blockquote>
<p><strong>Hint</strong>: Think about how many elements should be in the vector, and what kind of math operation you could use.</p>
</section>
<section id="sequence" class="level2">
<h2 class="anchored" data-anchor-id="sequence">Sequence</h2>
<p>Alternatively, you can also use <code>seq()</code> to generate more complicated sequences</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] -1.0 -0.9 -0.8 -0.7 -0.6 -0.5 -0.4 -0.3 -0.2 -0.1  0.0  0.1  0.2  0.3  0.4
[16]  0.5  0.6  0.7  0.8  0.9  1.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="at">length=</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1.0000000 -0.6666667 -0.3333333  0.0000000  0.3333333  0.6666667  1.0000000</code></pre>
</div>
</div>
</section>
<section id="rows-and-columns" class="level2">
<h2 class="anchored" data-anchor-id="rows-and-columns">Rows and Columns</h2>
<p>As noted above, the output of <code>c()</code> with two or more elements is a <strong>vector</strong> object that is conceptually similar to a set of rows or columns in a spreadsheet.</p>
<p>Use <code>cbind()</code> to bind columns and <code>rbind()</code> to bind rows, as shown in <strong>Figures 1.3 &amp; 1.4</strong>. The result is a two-dimensional <strong>matrix</strong>, which is conceptually similar to a spreadsheet of <code>n</code> rows by <code>c</code> columns.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/cbind.png" class="img-fluid figure-img" alt="cbind() function combines columns"></p>
<figcaption>cbind() function combines columns</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">10</span><span class="sc">:</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1] [,2]
 [1,]    1   10
 [2,]    2    9
 [3,]    3    8
 [4,]    4    7
 [5,]    5    6
 [6,]    6    5
 [7,]    7    4
 [8,]    8    3
 [9,]    9    2
[10,]   10    1</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/rbind.png" class="img-fluid figure-img" alt="rbind() function combines rows"></p>
<figcaption>rbind() function combines rows</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">10</span><span class="sc">:</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]    1    2    3    4    5    6    7    8    9    10
[2,]   10    9    8    7    6    5    4    3    2     1</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>What are <code>n</code> (number of rows) and <code>c</code> (number of columns) for each of the above examples?</p>
</blockquote>
<section id="congrats-again" class="level3">
<h3 class="anchored" data-anchor-id="congrats-again">Congrats, Again!</h3>
<p>Okay, let’s take a quick breather from writing code. You have been typing along, right? If not, go back and type out the code. It really is so important if you want to learn this!</p>
<p>We are about to delve deeper into the realm of <strong>object-oriented programming</strong>, but first we need to cover a few basic concepts.</p>
</section>
</section>
<section id="data-types" class="level2">
<h2 class="anchored" data-anchor-id="data-types">Data Types</h2>
<p>Programming languages like R use different data types.</p>
<p>It’s very important to understand data types in order to properly encode and analyze data in R. Here is an overview of the main data types:</p>
<table class="table">
<colgroup>
<col style="width: 6%">
<col style="width: 3%">
<col style="width: 89%">
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>string</code></td>
<td><code>"String"</code></td>
<td>Strings are the most common and versatile data type. They can be defined with single <code>('')</code> or double <code>("")</code> quotation marks. The downside of strings is that you typically can’t do mathematical functions with them.</td>
</tr>
<tr class="even">
<td><code>numeric</code> (<strong>float</strong>)</td>
<td><code>12.421</code></td>
<td>Numeric variables are numbers and come in a few flavours. Floats are rational numbers.</td>
</tr>
<tr class="odd">
<td><code>numeric</code> (<strong>integer</strong>)</td>
<td><code>12</code></td>
<td>Integers are numeric objects that store whole numbers, and may be positive or negative (no decimal).</td>
</tr>
<tr class="even">
<td><code>complex</code></td>
<td><code>0+12.43i</code></td>
<td>Complex numbers include real and imaginary numbers.</td>
</tr>
<tr class="odd">
<td><code>logical</code></td>
<td><code>T</code> or <code>TRUE</code></td>
<td>Logical (aka <strong>Boolean</strong>) variables are either <code>TRUE</code> or <code>FALSE</code>, which can be shortened to <code>T</code> and <code>F</code> (<strong>Note</strong> the use of capital letters only). NOTE: <code>TRUE</code> and <code>T</code> are a special <em>logical</em> data type and are interchangeable in R, but <code>"TRUE"</code> and <code>'TRUE'</code> and <code>"T"</code> with quotation marks are <em>strings</em> and are treated as separate entities.</td>
</tr>
<tr class="even">
<td><code>factors</code></td>
<td>any</td>
<td>Factors are a special type of data that may include strings and/or numbers but have a limited number of classes. Factors are often used to code groups in statistical models.</td>
</tr>
</tbody>
</table>
<p>Note that computers cannot store irrational (i.e.&nbsp;infinite, non-repeating) numbers, instead they have encoded as fractions or equations and rounded to some (tiny) decimal place.</p>
<p>Why does it matter? It’s very common to have errors in statistical analyses caused by the wrong kind of data. Here is a very common example of a big coding error in Biology:</p>
<p>Imagine you have an experiment set up with three experimental groups coded as <code>1</code>, <code>2</code> and <code>3</code>.</p>
<blockquote class="blockquote">
<p><strong>Question</strong>: What data type should these be?</p>
</blockquote>
<p><strong>Answer</strong>: These should be coded and analyzed as <strong>factors</strong> NOT <strong>numeric</strong> variables. Running statistical anlayses in R on numeric objects that should be factors will give completely different (and wrong!) statistical results.</p>
<p>More generally, you should keep these data types in mind. Consider memorizing them, or even just printing or writing them out and pasting them on your wall. When you get to a point where you are collecting your own data or working with other data sources, you will need to think carefully about which data type each observation should be coded as. This is called <strong>data coding</strong> and it is one of the most important steps in any data analysis pipeline.</p>
</section>
<section id="objects-variables" class="level2">
<h2 class="anchored" data-anchor-id="objects-variables">Objects &amp; Variables</h2>
<p>R supports <strong>Object-Oriented Programming (OOP)</strong>, which is a programming style that defines and manipulates <strong>objects</strong></p>
<p>As we have seen, an <strong>object</strong> in R can be a lot of things, but to understand some of the key objects, let’s start by thinking about a spreadsheet (example Microsoft Excel).</p>
<p>A spreadsheet has individual cells or elements (boxes) organized into rows (e.g., numbers) and columns (e.g., letters), and may have multiple sheets (tabs). Any of these can be coded objects in R. Objects can also be more complicated types of text files. In biology, we might have DNA (or RNA or protein) sequence data, or matrices of species community data, or time series, or the output of a statistical test. All of these can be coded as objects in R.</p>
<p><strong>Variables</strong> are objects that can change value. In R, we can assign variables using <code>&lt;-</code> or <code>=</code>. Almost everything you need to know about R to be a prolific data scientist in biology involves manipulating object <em>variables</em> with <em>functions</em>!</p>
<section id="elements-cells" class="level3">
<h3 class="anchored" data-anchor-id="elements-cells">Elements (Cells)</h3>
<p>The most basic object is a single value. For example, a string:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>X<span class="ot">&lt;-</span><span class="st">"string"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>Question</strong>: Why no output?</p>
</blockquote>
<p><strong>Answer</strong>: When we wrote: <code>X&lt;-"string"</code> R created the object called <strong>X</strong>. The value of <code>"string"</code> is stored in the R object called <code>X</code>, so no output is produced.</p>
<p>There are a few options to see the contents of <code>X</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(X)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "string"</code></pre>
</div>
</div>
<p><code>print()</code> Is most generic and versatile for providing feedback while running complex scripts (e.g.&nbsp;during loops, Bash scripts, etc)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(X)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "string"</code></pre>
</div>
</div>
<p><code>paste()</code> Converts objects to a string, we’ll come back to this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>X</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "string"</code></pre>
</div>
</div>
<p>Generally <code>print()</code> or <code>paste()</code> are preferred over calling the object directly.</p>
<p>OR, we can put the whole thing in brackets, which saves a line of code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>(X<span class="ot">&lt;-</span><span class="st">"string"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "string"</code></pre>
</div>
</div>
<p>Which one should you use? It’s ok to use the bracket methods for simple scripts and reports, but use <code>print()</code> for more complicated analysis pipelines, especially those that run through a scheduler on remote computers.</p>
</section>
<section id="vector" class="level3">
<h3 class="anchored" data-anchor-id="vector">Vector</h3>
<p>A vector is a one-dimensional array of cells. This could be part of a row or column in our spreadsheet example.</p>
<p>Each cell within the vector has an ‘address’ – a number corresponding to the cell ranging from <span class="math inline">\(1\)</span> to <span class="math inline">\(N\)</span>, where <span class="math inline">\(N\)</span> is the number of cells.</p>
<p>The number of cells in a vector is called the <strong>length</strong> of the vector.</p>
<p>All items in a vector must be of the same data type. If you mix data types, then the whole vector will be formatted to the most inclusive type. For example, if you include a string with any other format, then the whole vector will be treated as a string:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>Xvec<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="fl">1.1829378</span>, X, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="st">"E"</span>, <span class="st">"Computational Biology"</span>, <span class="dv">100</span><span class="sc">:</span><span class="dv">90</span>)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>Xvec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1.1829378"             "string"                "1"                    
 [4] "2"                     "3"                     "4"                    
 [7] "5"                     "6"                     "7"                    
[10] "8"                     "9"                     "10"                   
[13] "E"                     "Computational Biology" "100"                  
[16] "99"                    "98"                    "97"                   
[19] "96"                    "95"                    "94"                   
[22] "93"                    "92"                    "91"                   
[25] "90"                   </code></pre>
</div>
</div>
<p>A string is more inclusive because whole numbers can be stored as strings, but there is universally accepted way to store a character string as a whole number.</p>
<p>Similarly, a vector containing integer and rational numbers is a vector of only rational numbers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="fl">1.23</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.00 2.00 3.00 1.23</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Protip</strong>: A common problem when importing data to R occurs when a column of numeric data includes at least one text value (e.g.&nbsp;“missing” or “&lt; 1”). R will treat the entire column as text rather than numeric values. Watch for this when working with real data!</p>
</blockquote>
<p>If you want to mix data types without converting them, you can use a <strong>list</strong> object, which is described later. But first we will need to get comfortable working with the more basic data types.</p>
<section id="subset-a-vector" class="level4">
<h4 class="anchored" data-anchor-id="subset-a-vector">Subset a Vector</h4>
<p>Each cell within a vector has a specific address. Just as text message with the correct email address can find its way to your computer, you can find an element in a vector using its address. Remember that in R, addresses start with the number <span class="math inline">\(1\)</span> and increase up to the total number of elements.</p>
<p>R uses square brackets <code>[]</code> to subset a vector based on the element addresses.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>Xvec[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1.1829378"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>Xvec[<span class="dv">13</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "E"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>Xvec[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1.1829378" "string"    "1"        </code></pre>
</div>
</div>
</section>
</section>
<section id="matrices" class="level3">
<h3 class="anchored" data-anchor-id="matrices">Matrices</h3>
<p>A matrix is a 2-D array of cells, equivalent to one sheet in a spreadsheet program. The <code>matrix()</code> function can convert a vector to a matrix.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>Xmat<span class="ot">&lt;-</span><span class="fu">matrix</span>(Xvec,<span class="at">nrow=</span><span class="dv">5</span>)</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>Xmat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]        [,2] [,3]                    [,4] [,5]
[1,] "1.1829378" "4"  "9"                     "99" "94"
[2,] "string"    "5"  "10"                    "98" "93"
[3,] "1"         "6"  "E"                     "97" "92"
[4,] "2"         "7"  "Computational Biology" "96" "91"
[5,] "3"         "8"  "100"                   "95" "90"</code></pre>
</div>
</div>
<p>Be sure to understand what happened here. Compare this <code>Xmat</code> object to the <code>Xvec</code> object, above. See how we have re-arranged the elements of a one-dimensional vector into a two-dimensional matrix? <strong>Note</strong>: these two objects need the same number of elements – <span class="math inline">\(1\times25\)</span> for <code>Xvec</code> and <span class="math inline">\(5\times5\)</span> for <code>Xmat</code>.</p>
<section id="subset-a-matrix" class="level4">
<h4 class="anchored" data-anchor-id="subset-a-matrix">Subset a Matrix</h4>
<p>Did you notice the <strong>square brackets</strong> along the top and left side? Do you see how the <strong>rows</strong> have numbers <em>before</em> the comma and <strong>columns</strong> have numbers <em>after</em> the comma?</p>
<p>These show the address of each element in the matrix. We can subset with square brackets, just like we did with vectors. Since there are two dimensions, we need to specify two numbers using the syntax <code>[row,column]</code>.</p>
<p>For example, if we want to select the element from the 3rd column of the 1st row:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>Xmat[<span class="dv">1</span>,<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "9"</code></pre>
</div>
</div>
<p>Or leave it blank if you want the whole row or column:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>Xmat[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1.1829378" "4"         "9"         "99"        "94"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>Xmat[,<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "9"                     "10"                    "E"                    
[4] "Computational Biology" "100"                  </code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Protip</strong>: Always remember <code>[row,col]</code>: “<strong>rows</strong> <em>before</em> and <strong>columns</strong> <em>after</em> the comma. Say it with me”Rows before columns”. Say it again, and again, until it is hard-coded in your brain.</p>
</blockquote>
</section>
</section>
<section id="arrays" class="level3">
<h3 class="anchored" data-anchor-id="arrays">Arrays</h3>
<p><strong>Array</strong> is a general term to describe any object with <span class="math inline">\(N\)</span> dimensions. We’ve already seen a few different examples:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;">Dimension</th>
<th style="text-align: center;">Object Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">Cell</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">Vector</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">Matrix</td>
</tr>
<tr class="even">
<td style="text-align: center;">3+</td>
<td style="text-align: center;">Array</td>
</tr>
</tbody>
</table>
<p>In R you can build arrays by adding as many dimensions as you need using the <code>array()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>Xarray<span class="ot">&lt;-</span><span class="fu">array</span>(<span class="dv">0</span>, <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">2</span>)) <span class="co"># 3 dimensions</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>Xarray</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , 1

     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    0    0    0
[3,]    0    0    0

, , 2

     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    0    0    0
[3,]    0    0    0</code></pre>
</div>
</div>
<p>Notice how 3rd dimension is sliced to print out in 2D. Another way to conceptualize this array is to think of two matrices with the same dimension (rows-by-columns). The element of each matrix can be addressed by its <code>[row,col]</code> but we need a third dimension do distinguish between the two matrices. You can see this in the output above each matrix: <code>,,1</code> vs <code>,,2</code>. Together, this array has three dimensions: <code>[row,col,matrix]</code>.</p>
<blockquote class="blockquote">
<p><strong>Question</strong>: If we add a third matrix with the same number of rows and columns, how many dimensions would you need to pull out a specific cell element in R? What if there were 10 or 100 instead of three?</p>
</blockquote>
<p><strong>Answer</strong>: Three! In each case, we whould still have a 3-dimensional array, and we can access any element as above: <code>[row,col,matrix]</code>. All we are changing is the matrix number from 2 to 3 to 10 to 100!</p>
<p>Higher-order arrays are also possible, but a bit tricky to read on a 2-dimensional screen, and very hard to conceptualize.</p>
<p>Here’s an example of a six-dimensional array.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>Xarray<span class="ot">&lt;-</span><span class="fu">array</span>(<span class="fu">rnorm</span>(<span class="dv">64</span>), <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once you get the hang of it, it’s easy to subset. Just think of each dimension, separated by commas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>Xarray[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]       [,2]
[1,] -1.718987  0.3487603
[2,]  1.779268 -0.3523615</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>Xarray[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]      [,2]
[1,] -1.718987 0.8664164
[2,]  1.779268 1.2394975</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Question</strong>: Why are these numbers not the same?</p>
</blockquote>
<p><strong>Answer</strong>: Look at the <code>array[]</code> function and compare to the 6-D array to understand how this works. Each function captures a different 2-dimensional subspace of the 6-dimensional array</p>
<p>If these higher-dimension arrays are too abstract, don’t worry. You can get a better understanding with practice. They are important for neural networks, machine learning, and multivariate data (e.g.&nbsp;quantitative genetics, community ecology). Luckily, most of what you need to know you can extrapolate from your intuition about 2-dimensional and 3-dimensional space. Just make sure you understand the similarities and differences among cells/elements, vectors and matrices before you move on.</p>
</section>
</section>
<section id="lists" class="level2">
<h2 class="anchored" data-anchor-id="lists">Lists</h2>
<p>Matrices and higher-order arrays generally all have the same data type and sub-dimension. For example, if you want to combine two separate 2D matrices into a single 3-D array, then the individual matrices have to have the same number of rows and columns. They should also have the same data type, or else everything will be converted to the most inclusive type, as noted earlier in the <em>Vectors</em> section.</p>
<p>Often we may want to link different types of information together while still maintaining their different data types. Think of a record in a database where you may have information about an organism’s taxonomic classification (factors) height (numeric), weight (numeric), general notes and observations (string), number of scales (integer), and maybe a photograph (numeric matrix) and a DNA sequence (string vector). This wouldn’t fit neatly into an array format. Instead, we can use a <strong>list</strong> object.</p>
<p>Lists are useful for mixing data types, and can combine different dimensions of cells, vectors, and higher-order arrays.</p>
<p>Each element in a list needs a name:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>MyList<span class="ot">&lt;-</span><span class="fu">list</span>(<span class="at">name=</span><span class="st">"SWC"</span>,<span class="at">potpourri=</span>Xvec,<span class="at">numbers=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>MyList</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$name
[1] "SWC"

$potpourri
 [1] "1.1829378"             "string"                "1"                    
 [4] "2"                     "3"                     "4"                    
 [7] "5"                     "6"                     "7"                    
[10] "8"                     "9"                     "10"                   
[13] "E"                     "Computational Biology" "100"                  
[16] "99"                    "98"                    "97"                   
[19] "96"                    "95"                    "94"                   
[22] "93"                    "92"                    "91"                   
[25] "90"                   

$numbers
 [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Important</strong>: Many of the statistical functions and other tools in R use list objects to store output. Taking some time now to think about how lists work will save time later when you need to interpret output of R functions.</p>
</blockquote>
<section id="subset" class="level3">
<h3 class="anchored" data-anchor-id="subset">Subset</h3>
<p>There are a few different ways to subset a list object. We can subset by name using the <code>$</code> character</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>MyList<span class="sc">$</span>numbers <span class="co"># Use $ to subset by name</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<p>Or we can <strong>slice</strong> using square brackets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>MyList[<span class="dv">3</span>] <span class="co"># A 'slice' of MyList</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$numbers
 [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<p>This is similar to the way we used <code>[]</code> in vectors and matrices BUT note the inclusion of the name <code>$numbers</code> at the top of the output.</p>
<p>With lists, we have another option, to <strong>extract</strong> using double square brackets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>MyList[[<span class="dv">3</span>]] <span class="co"># An 'extract' of MyList</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>What’s the difference between <code>[]</code> and <code>[[]]</code>?</p>
</blockquote>
<p>This is a bit tricky, but if you invest some time now to understand, you will save yourself a lot of headaches troubleshooting error messages in your code. Do your future-self a favour and take some time to understand this…</p>
<p>First, Look carefully at the output above; notice how the <code>[]</code> includes <code>$numbers</code> but the <code>[[]]</code> includes only the values? This is important if you want to use the slice:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">*</span>MyList[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in 2 * MyList[3]: non-numeric argument to binary operator</code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">*</span>MyList[[<span class="dv">3</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  2  4  6  8 10 12 14 16 18 20</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Note the error generated in the first case</p>
</blockquote>
<p>The second case is just a pure vector of numbers, that’s why we can multiply each value by two. The first case is still connected to a list object, with the <code>$numbers</code> indicating that we are looking at the <em>numbers</em> element of the list. This is part of a larger object, so R returns an error when we try to multiply a number.</p>
<p>In other words, the <code>$numbers</code> heading is part of the sliced object created with <code>[]</code> but NOT the extracted object created with <code>[[]]</code>.</p>
</section>
</section>
<section id="print-and-paste" class="level2">
<h2 class="anchored" data-anchor-id="print-and-paste"><code>print()</code> and <code>paste()</code></h2>
<p>As noted earlier, the <code>print</code> function is the go-to function for printing output to the user. The <code>paste</code> function is useful for combining things together.</p>
<p>Paste is a versatile function for manipulating output:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"Hello World!"</span>) <span class="co"># Basic string</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello World!"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"Hello"</span>,<span class="st">"World!"</span>) <span class="co"># Concatenate two strings</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello World!"</code></pre>
</div>
</div>
<p>Sometimes we need to convert numbers to strings. <code>paste</code> is an easy way to do this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="co"># Paste numbers as strings</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)[<span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "4"</code></pre>
</div>
</div>
<p>Note how each number above is a separate cell in a vector of strings.</p>
<p>Use <code>as.numeric</code> to convert strings back to numbers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">paste</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)) <span class="co"># Convert back to numbers</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<p>We can also use the <code>collapse</code> parameter to condense a multi-cell vector into a single cell. Reading the help for new functions reveals a lot of great treasures like this!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="at">collapse=</span><span class="st">"."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1.2.3.4.5.6.7.8.9.10"</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Question</strong>: What happens if we paste objects of different length?</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="fu">c</span>(<span class="st">"Hello"</span>,<span class="st">"World"</span>),<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="at">sep=</span><span class="st">"-"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Hello-1"  "World-2"  "Hello-3"  "World-4"  "Hello-5"  "World-6" 
 [7] "Hello-7"  "World-8"  "Hello-9"  "World-10"</code></pre>
</div>
</div>
<p><strong>Answer</strong>: The shorter vector gets recycled until every element of the longer vector is pasted.</p>
<p>It is not uncommon to nest a paste function within a print function to communicate output in more complex R scripts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Hello"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="at">sep=</span><span class="st">"-"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Hello-1"  "Hello-2"  "Hello-3"  "Hello-4"  "Hello-5"  "Hello-6" 
 [7] "Hello-7"  "Hello-8"  "Hello-9"  "Hello-10"</code></pre>
</div>
</div>
<p>This would be useful if you were running a long program with many steps, maybe on a remote high-performance computer where you submit your jobs to a scheduler and you want your program to keep notes about its progress, or generate other notes or feedback. The output of <code>paste</code> is not shown on the screen if used inside of a loop, whereas the output of <code>print</code> is. More about loops below.</p>
</section>
<section id="external-files" class="level2">
<h2 class="anchored" data-anchor-id="external-files">External Files</h2>
<p>So far we’ve done everything within the R environment. If we quit R, then everything we have made will be removed from memory and we’ll have to start all over.</p>
<p>For larger projects and reproducible analysis, it is useful to save and load data from external files.</p>
<section id="working-directory" class="level3">
<h3 class="anchored" data-anchor-id="working-directory">Working Directory</h3>
<p>The <strong>working directory</strong> is the place on your computer where R looks to load or save your files. You can find your current working directory with the <code>getwd()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Note</strong>: The output is specific to your computer, so it isn’t shown here.</p>
</section>
<section id="absolute-path" class="level3">
<h3 class="anchored" data-anchor-id="absolute-path">Absolute Path</h3>
<p>The directory shown in <code>getwd()</code> is called an <strong>absolute path</strong>. A path is just computer jargon for the way you get to your working directory, like walking down a path in your computer, turning into the correct directory or folder each time until you reach your destination. The <em>absolute</em> term means that it is a location that is unchanging. The problem, for reproducible research, is that the location is specific to your user profile on your computer.</p>
<p>You can set an absolute path with <code>setwd()</code>. Here’s one example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/ColauttiLab/Documents"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>Did you type out the above line? You should if you have been following the instructions! If you haven’t, go back to where you stopped and type everything out to reinforce it in your brain. Remember, going through and typing everything out is one of the most effective ways to learn to code.</p>
</blockquote>
<p>If you have been typing along, you should have an error message, unless you are working in Windows and for some reason have a <em>ColauttiLab</em> username. Now try changing to a different directory on your computer.</p>
<p>If you are a mac user, your directory is probably similar, but without the <strong><code>C:</code></strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/Users/ColauttiLab/Documents"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Again, you will get an error unless you replace the above with a directory that exists on your own computer.</p>
<p>This is why you should <strong>never use absolute path names in your code</strong>. You should always aim for reproducible code, and absolute paths are not reproducible on other computers.</p>
<p>Don’t worry, there is a better way…</p>
</section>
<section id="relative-path" class="level3">
<h3 class="anchored" data-anchor-id="relative-path">Relative Path</h3>
<p>In the <strong>absolute path</strong> example above, we first go to the <strong>root</strong> directory, which is the most basic level (or the C: drive in the case of Windows). From the root directory we first click on the <strong>Users</strong> folder, then the <strong>ColauttiLab</strong> folder, and finally the <strong>Documents</strong> folder.</p>
<p>In R, we can just provide a path name as text rather than clicking through all the different folders each time. But as we have seen, the problem with absolute path names is that they are often unique to each user.</p>
<p>Instead of an absolute path, we should use a <strong>relative path</strong> in our code. The relative path in R is denoted with a period, usually followed by a forward slash.</p>
<p>For example, if we have a folder called <code>Data</code> inside our <code>Documents</code> folder, and our current working directory is one of the two examples above, we can use a relative path name to set the <code>Data</code> folder as the working directory. Before you type this out, you should make a folder called <code>Data</code> inside of your current working directory, or else you will get an error.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"./Data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The single dot (<code>.</code>) means <em>inside of my current directory</em> and the <code>/Data</code> means <em>move into the Data folder</em>. This is the coding equivalent of double-clicking the data Folder in your Windows File Explorer or Mac OS Finder.</p>
<p>Now try running this code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">".."</span>)</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Compare the working directories. The double dot (<code>..</code>) means <em>go to the parent directory</em> (i.e.&nbsp;directory containing the current working directory).</p>
<p>The neat thing about relative directories is that it makes it easy to share complex R code between Windows, MacOS and Linux/Unix. In fact, the syntax used by R is the same as Unix, GNU, and Linux.</p>
<p>To make relative paths reproducible, we just have to make sure that the user has all of the relevant files and directors that we are using in our main working directory. R Studio makes it easy to organize your files and code in a sharable working directory by creating an R Project folder.</p>
</section>
</section>
<section id="r-projects" class="level2">
<h2 class="anchored" data-anchor-id="r-projects">R Projects</h2>
<p>Working with relative paths can get a little bit confusing, especially if you start using <code>setwd()</code>. A good way to avoid confusion is to make an R project in R Studio</p>
<p><code>File--&gt;New Project--&gt;New Directory--&gt;New Project</code></p>
<p>Then make a name for your project and choose where you want to save it on your computer.</p>
<p>Now quit R studio and look inside the new directory that you just created on your computer. You will see a file with the name of your project followed by <code>.Rproj</code></p>
<p>If you can’t see this file, make sure you can view hidden files. Search for ‘show hidden files’ in your operating system help if you don’t know how to do this.</p>
<p>This file is an R project file, and you can double-click on it to open the project. Now here’s the cool part: Start R Studio by double-clicking the <code>.Rproj</code> <em>project file</em> instead of opening the <em>R Studio App</em> directly. This should open R Studio, but you will see that the <em>project folder</em> will be your default relative path, which you can check with <code>getwd()</code>.</p>
<p>There are several good reasons to use R Projects, which become more obvious as you progress as a coder and start working on collaborative projects. For now, think of your project folder as your self-contained programming pipeline. In principle, you want to be able to send the project folder to somebody else to run on another computer without making any changes to the code. You can do this if you learn how to use relative path names.</p>
</section>
<section id="import-data" class="level2">
<h2 class="anchored" data-anchor-id="import-data">Import Data</h2>
<p>Download this data file from the Colautti Lab resources website: <a href="https://colauttilab.github.io/RCrashCourse/FallopiaData.csv" class="uri"><em>https://colauttilab.github.io/RCrashCourse/FallopiaData.csv</em></a></p>
<p>Save this as a <code>.csv</code> file in a directory called <code>Data</code> inside of your new project folder:</p>
<p>Now open the file with a text editor and take a look at it.</p>
<p>The <code>.csv</code> suffix stands for ‘Comma Separated Values’. This is really just a regular old text file with different columns separated by commas and different rows separated by each line of text (i.e.&nbsp;hit ‘Enter’ to add a new row). You can see this if you try opening the file in a simple text editor (e.g.&nbsp;Notepad for Windows or textEdit for MacOS).</p>
<blockquote class="blockquote">
<p><strong>Pro-tip</strong>: You can easily create a <code>.csv</code> by choosing the <em>Save As</em> or <em>Export</em> in most spreadsheet programs (e.g.&nbsp;MS Excel), and choosing CSV as the output format.</p>
</blockquote>
<p>To import this data into R, we can use the <code>read.csv()</code> function and save it as an object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>MyData<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">"Data/FallopiaData.csv"</span>,<span class="at">header=</span>T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Often we have column names as the first row, so we include the parameter <code>header=T</code> to convert the first row to column names.</p>
<p>Data without column names would have data on the first row, so we would want <code>header=F</code> or else our first row of data would be treated as column names.</p>
<p><strong>Important</strong>: In R, objects created by <code>read.csv</code> and other <code>read.?</code> functions are special objects called <code>data.frame</code> objects.</p>
<section id="data.frame" class="level3">
<h3 class="anchored" data-anchor-id="data.frame"><code>data.frame</code></h3>
<p>A <code>data.frame</code> is a special type of object in R that is similar to a 2D matrix, but with additional indexing information for rows and columns of data. This format is partly why base R is so useful for writing a quick, reproducible data analysis.</p>
<p>There are a number of useful functions for inspecting a <code>data.frame</code> object.</p>
<p>The indices used for column names can accessed with the <code>names()</code> function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(MyData)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "PotNum"       "Scenario"     "Nutrients"    "Taxon"        "Symphytum"   
 [6] "Silene"       "Urtica"       "Geranium"     "Geum"         "All_Natives" 
[11] "Fallopia"     "Total"        "Pct_Fallopia"</code></pre>
</div>
</div>
<p>There are also a number of functions to quickly inspect the data.frame:</p>
<ol type="1">
<li>Show the first six rows of data</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(MyData) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  PotNum Scenario Nutrients Taxon Symphytum Silene Urtica Geranium Geum
1      1      low       low japon      9.81  36.36  16.08     4.68 0.12
2      2      low       low japon      8.64  29.65   5.59     5.75 0.55
3      3      low       low japon      2.65  36.03  17.09     5.13 0.09
4      5      low       low japon      1.44  21.43  12.39     5.37 0.31
5      6      low       low japon      9.15  23.90   5.19     0.00 0.17
6      7      low       low japon      6.31  24.40   7.00     9.05 0.97
  All_Natives Fallopia Total Pct_Fallopia
1       67.05     0.01 67.06         0.01
2       50.18     0.04 50.22         0.08
3       60.99     0.09 61.08         0.15
4       40.94     0.77 41.71         1.85
5       38.41     3.40 41.81         8.13
6       47.73     0.54 48.27         1.12</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Show the last six rows</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(MyData) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    PotNum     Scenario Nutrients Taxon Symphytum Silene Urtica Geranium Geum
118    143 fluctuations      high bohem      5.06  12.81  23.82     3.64 0.16
119    144 fluctuations      high bohem     19.93  21.07   6.08     2.80 0.43
120    145 fluctuations      high bohem      4.89  32.93   6.30     9.64 0.00
121    147 fluctuations      high bohem      7.84  31.16  13.61     6.58 0.03
122    148 fluctuations      high bohem      4.15  38.70  23.59     5.11 1.36
123    149 fluctuations      high bohem      1.72  10.41  23.48     8.51 0.43
    All_Natives Fallopia Total Pct_Fallopia
118       45.49    21.31 66.80        31.90
119       50.31     0.00 50.31         0.00
120       53.76     2.36 56.12         4.21
121       59.22     3.74 62.96         5.94
122       72.91     5.89 78.80         7.47
123       44.55    19.70 64.25        30.66</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Check the dimension – the number of rows and columns</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(MyData) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 123  13</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Check the number of rows only</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(MyData) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 123</code></pre>
</div>
</div>
<ol start="5" type="1">
<li>Check the number of columns only</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(MyData) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13</code></pre>
</div>
</div>
<ol start="6" type="1">
<li>Interrogate the <strong>structure</strong> of the data</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(MyData) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   123 obs. of  13 variables:
 $ PotNum      : int  1 2 3 5 6 7 8 9 10 11 ...
 $ Scenario    : chr  "low" "low" "low" "low" ...
 $ Nutrients   : chr  "low" "low" "low" "low" ...
 $ Taxon       : chr  "japon" "japon" "japon" "japon" ...
 $ Symphytum   : num  9.81 8.64 2.65 1.44 9.15 ...
 $ Silene      : num  36.4 29.6 36 21.4 23.9 ...
 $ Urtica      : num  16.08 5.59 17.09 12.39 5.19 ...
 $ Geranium    : num  4.68 5.75 5.13 5.37 0 9.05 3.51 9.64 7.3 6.36 ...
 $ Geum        : num  0.12 0.55 0.09 0.31 0.17 0.97 0.4 0.01 0.47 0.33 ...
 $ All_Natives : num  67 50.2 61 40.9 38.4 ...
 $ Fallopia    : num  0.01 0.04 0.09 0.77 3.4 0.54 2.05 0.26 0 0 ...
 $ Total       : num  67.1 50.2 61.1 41.7 41.8 ...
 $ Pct_Fallopia: num  0.01 0.08 0.15 1.85 8.13 1.12 3.7 0.61 0 0 ...</code></pre>
</div>
</div>
<p>We can use this to see column headers, types of data contained in each column, and the first few values in each column.</p>
<blockquote class="blockquote">
<p><strong>Protip</strong>: <code>str()</code> is also useful for inspecting other objects, like the output of functions used for statistics or plotting</p>
</blockquote>
<p>Pay careful attention to integer <code>int</code> vs numeric <code>num</code> vs <code>factor</code> columns in the <code>str()</code> output. These are the data types assigned to each column. As noted earlier, a common source of error students make when starting to analyze data is using the wrong data <em>type</em>.</p>
<p>Here’s an example of data types gone rogue: In an analysis of variance (ANOVA), you want a <code>factor</code> as a predictor and a <code>num</code> or <code>int</code> as a response. But in linear regression you want <code>int</code> or <code>num</code> as a predictor instead of <code>factor</code>. If you code your factor (e.g.&nbsp;treatment) as a number (e.g.&nbsp;1-4) then R will treat it as an integer when you import the data. When you run a linear model with the <code>lm</code> function, you will be running a regression rather than ANOVA! As a result, you will estimate a slope rather than the difference between group means.</p>
<section id="summary" class="level4">
<h4 class="anchored" data-anchor-id="summary">Summary</h4>
<p>Always check your data types (e.g.&nbsp;using <code>str</code>) when you first import the data.</p>
</section>
</section>
<section id="subset-1" class="level3">
<h3 class="anchored" data-anchor-id="subset-1">Subset</h3>
<p>The <code>data.frame</code> object can be subset, just like a matrix object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>MyData[<span class="dv">1</span>,] <span class="co"># Returns first row of data.frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  PotNum Scenario Nutrients Taxon Symphytum Silene Urtica Geranium Geum
1      1      low       low japon      9.81  36.36  16.08     4.68 0.12
  All_Natives Fallopia Total Pct_Fallopia
1       67.05     0.01 67.06         0.01</code></pre>
</div>
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>MyData[<span class="dv">1</span>,<span class="dv">1</span>] <span class="co"># Returns first value of data.frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>In addition to numbers, you can subset a column by its header.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>MyData[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,<span class="st">"PotNum"</span>] <span class="co"># Returns values in "PotNum" column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>MyData<span class="sc">$</span>PotNum[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>] <span class="co"># A shortcut to subset the column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 5</code></pre>
</div>
</div>
<p>Note how we also include 1:4 to show only the first 4 elements, which reduces the output to a more manageable level. If you aren’t sure why, try running the above without 1:4 to see the difference.</p>
<p>We can also subset the data based on particular row values. For example, we can find only the records in the <em>extreme</em> treatment scenario.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(MyData,Scenario<span class="sc">==</span><span class="st">"low"</span> <span class="sc">&amp;</span> Total <span class="sc">&gt;</span> <span class="dv">60</span>) <span class="co"># Subset</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  PotNum Scenario Nutrients Taxon Symphytum Silene Urtica Geranium Geum
1      1      low       low japon      9.81  36.36  16.08     4.68 0.12
3      3      low       low japon      2.65  36.03  17.09     5.13 0.09
  All_Natives Fallopia Total Pct_Fallopia
1       67.05     0.01 67.06         0.01
3       60.99     0.09 61.08         0.15</code></pre>
</div>
</div>
</section>
<section id="new-columns" class="level3">
<h3 class="anchored" data-anchor-id="new-columns">New Columns</h3>
<p>It’s easy to add new columns to a data frame. For example, to add a new column that is the sum of two others:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>MyData<span class="sc">$</span>NewTotal<span class="ot">&lt;-</span>MyData<span class="sc">$</span>Symphytum <span class="sc">+</span> MyData<span class="sc">$</span>Silene <span class="sc">+</span> MyData<span class="sc">$</span>Urtica</span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(MyData)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "PotNum"       "Scenario"     "Nutrients"    "Taxon"        "Symphytum"   
 [6] "Silene"       "Urtica"       "Geranium"     "Geum"         "All_Natives" 
[11] "Fallopia"     "Total"        "Pct_Fallopia" "NewTotal"    </code></pre>
</div>
</div>
<p>Notice the new column added to the end. Let’s look at the first 10 values:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(MyData<span class="sc">$</span>NewTotal[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])      </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 62.25 43.88 55.77 35.26 38.24 37.71 49.46 32.77 45.76 39.20</code></pre>
</div>
</div>
</section>
</section>
<section id="other-functions" class="level2">
<h2 class="anchored" data-anchor-id="other-functions">Other Functions</h2>
<p>Here are a few more useful functions for inspecting your data:</p>
<section id="unique" class="level3">
<h3 class="anchored" data-anchor-id="unique"><code>unique()</code></h3>
<p>Find all the unique values within a vector using <code>unique()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(MyData<span class="sc">$</span>Nutrients)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "low"  "high"</code></pre>
</div>
</div>
</section>
<section id="duplicated" class="level3">
<h3 class="anchored" data-anchor-id="duplicated"><code>duplicated()</code></h3>
<p>Look at each value in a vector and return a <code>TRUE</code> if it is duplicated and <code>FALSE</code> if it is unique.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">duplicated</span>(MyData<span class="sc">$</span>Nutrients)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[121]  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
</section>
<section id="aggregate" class="level3">
<h3 class="anchored" data-anchor-id="aggregate"><code>aggregate()</code></h3>
<p>Quickly calculate means of one column of data (<code>NewTotal</code>) for each value of another column with groups (<code>Nutrients</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(MyData<span class="sc">$</span>NewTotal,<span class="fu">list</span>(MyData<span class="sc">$</span>Nutrients), mean) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Group.1        x
1    high 46.51173
2     low 42.76800</code></pre>
</div>
</div>
<p>The <em>tilde</em> (<code>~</code>) provides an alternative way to write this function. In R the tilde usually means <em>by</em> and it is often used in statistical models.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(NewTotal <span class="sc">~</span> Nutrients, <span class="at">data=</span>MyData, mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Nutrients NewTotal
1      high 46.51173
2       low 42.76800</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Hint</strong>: If you got an error, make sure you entered a tilde, not a minus sign.</p>
</blockquote>
<p>For the code above, we can say “aggregate <code>NewTotal</code> <em>by</em> <code>Nutrients</code> grouping”.</p>
<p>The nice thing about doing it this way is that we preserve the column name. Compare the column names here: <em>Nutrients</em> and <em>NewTotal</em>, vs above: <em>Group.1</em> and <em>x</em>.</p>
<p>We can also use the colon (<code>:</code>) or asterisk (<code>*</code>) to calculate means across different combinations of two or more grouping columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(NewTotal <span class="sc">~</span> Nutrients<span class="sc">:</span>Taxon<span class="sc">:</span>Scenario, <span class="at">data=</span>MyData, mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Nutrients Taxon     Scenario NewTotal
1       high bohem      extreme 45.24833
2       high japon      extreme 45.31500
3       high bohem fluctuations 43.89545
4       high japon fluctuations 44.77692
5       high bohem      gradual 45.36923
6       high japon      gradual 50.43417
7       high bohem         high 52.04273
8       high japon         high 45.69417
9        low bohem          low 41.75231
10       low japon          low 43.86833</code></pre>
</div>
</div>
<p>Note that <code>mean</code> in the <code>aggregate</code> function is just the <code>mean()</code> function in R, applied inside the aggregate function. Instead of <code>mean</code>, we can use other functions, like the standard deviation <code>sd</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(NewTotal <span class="sc">~</span> Nutrients, <span class="at">data =</span> MyData, sd) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Nutrients  NewTotal
1      high 11.175885
2       low  8.227402</code></pre>
</div>
</div>
</section>
<section id="tapply" class="level3">
<h3 class="anchored" data-anchor-id="tapply"><code>tapply()</code></h3>
<p><code>tapply()</code> works similarly, but using a <code>list()</code> function</p>
<p>For example, we can calculate means of each <code>Nutrients</code> group:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(MyData<span class="sc">$</span>NewTotal, <span class="fu">list</span>(MyData<span class="sc">$</span>Nutrients), mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    high      low 
46.51173 42.76800 </code></pre>
</div>
</div>
<p>Compare this output with <code>aggregate</code> above. Here, the groups are the column names.</p>
</section>
<section id="sapply-lapply" class="level3">
<h3 class="anchored" data-anchor-id="sapply-lapply"><code>sapply()</code> &amp; <code>lapply()</code></h3>
<p>The <code>sapply()</code> and <code>lapply()</code> functions are similar in principle to <code>tapply()</code>, but are used to apply a function repeatedly and output the result as a vector (<code>sapply</code>) or list object (<code>lapply</code>).</p>
<p>Here’s an example, where we can summarize the <code>class</code> of each column in our <code>data.frame</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(MyData, class)[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$PotNum
[1] "integer"

$Scenario
[1] "character"

$Nutrients
[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(MyData, class)[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     PotNum    Scenario   Nutrients 
  "integer" "character" "character" </code></pre>
</div>
</div>
<p>Compare the above with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(MyData)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(MyData<span class="sc">$</span>Taxon)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
</section>
</section>
<section id="tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="tidyverse">Tidyverse</h2>
<p>Most of the methods above for managing and summarizing data are the <em>classic</em> or <em>base R</em> functions. More recently, the <strong>tidyverse</strong> group of functions has gained popularity and these functions have a lot of advantages over the classic tools, particularly for complex data management.</p>
<p>For example, it is easy to string together multiple steps into a single ‘pipe’ of data reorganization. The <em>Data Science</em> Chapter in this book introduces the <code>dplyr</code> package as an introduction to the <code>tidyverse</code>.</p>
</section>
<section id="save" class="level2">
<h2 class="anchored" data-anchor-id="save">Save</h2>
<p>Just as we can load FROM external files, we can save TO external files. We just change <code>read</code> to <code>write</code>. For a CSV file:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Calulate means</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a>NutrientMeans<span class="ot">&lt;-</span><span class="fu">tapply</span>(MyData<span class="sc">$</span>NewTotal,<span class="fu">list</span>(MyData<span class="sc">$</span>Nutrients),mean)</span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Save means as .csv file</span></span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(NutrientMeans,<span class="st">"MyData_Nutrient_Means.csv"</span>, </span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">row.names=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>Note</strong>: the default for <code>write.csv()</code> adds a column of row names (i.e.&nbsp;numbers) to the output file. To avoid this, use <code>row.names=F</code></p>
</blockquote>
<p>You should see a file called <code>MyData_Nutrients_Means.csv</code> in your working directory.</p>
<section id="output-folder" class="level3">
<h3 class="anchored" data-anchor-id="output-folder">Output Folder</h3>
<p>Larger projects may generate a lot of different output files, which you may want to organize in an <code>Output</code> folder inside of your project folder. Saving to this folder is easy for relative path names, just add <code>./Data/</code> before the file name in your <code>write.csv()</code> function. Just make sure the folder exists before you try to save to it!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(NutrientMeans,</span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a>          <span class="st">"./Data/MyData_Nutrient_Means.csv"</span>,</span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">row.names=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Packages</h2>
<p>As noted earlier, <strong>functions</strong> in R use brackets <code>()</code> and generally have <strong>input</strong> and <strong>output</strong> objects as well as <strong>arguments</strong> (i.e.&nbsp;parameters) that affect the behaviour of the functions.</p>
<p>All of the functions in this tutorial are automatically loaded when you start <em>R</em> (or <em>R Studio</em>), but there are many more functions available. For example, our lab developed the <code>baRcodeR</code> package for creating unique identifier codes with printable barcodes and data sheets to help with sample management and data collection. You may find this helpful for labelling and tracking samples in your own work: <a href="https://doi.org/10.1111/2041-210X.13405" class="uri"><em>https://doi.org/10.1111/2041-210X.13405</em></a></p>
<p>A <strong>package</strong> in R is a set of functions grouped together. For example, the <code>stats</code> package is automatically loaded when you run R and contains many useful functions. You can see what package a function belongs to at the beginning of the help file:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>?cor</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The package is shown in curly brackets at the top of the help file. In this case, we see <code>cor {stats}</code> telling us that the <code>cor</code> function is part of the <code>stats</code> package. You can see which packages are loaded if you click on the <strong>Packages</strong> tab in <strong>R Studio</strong> (by default it is in the bottom-right window). The loaded packages are shown with check marks.</p>
<section id="installing" class="level3">
<h3 class="anchored" data-anchor-id="installing">Installing</h3>
<p>There are many more packages available that are not yet installed on your computer. You will need to install a new package before you can use it. You only have to do this once, but it is a good idea to update the package periodically, especially when you update to a new version of R. This ensures that you are using the most recent version of the package.</p>
<p>Packages are installed with <code>install.packages()</code>, with the package indicated with single or double quotation marks. When you run this code the first time, you may be prompted to choose a repository, in which case choose one that is geographically close to you.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">'baRcodeR'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that <strong>installing</strong> a package just downloads it from an online <strong>repository</strong> (remote computer) and saves to your personal computer.</p>
</section>
<section id="loading" class="level3">
<h3 class="anchored" data-anchor-id="loading">Loading</h3>
<p>To use a package that you already have installed, you can access it two ways.</p>
<ol type="1">
<li>You can load the package using the <code>library()</code> function, giving you access to all of the functions contained within it:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(baRcodeR)</span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make_labels</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will generate a pop-up menu for creating barcode labels with unique identifiers.</p>
<p>This method is more common, especially when you will use multiple functions from the same package, or use the same functions multiple times.</p>
<ol start="2" type="1">
<li>You can use double colons (<code>::</code>) to call a function without loading the whole package</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a>baRcodeR<span class="sc">::</span><span class="fu">make_labels</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This line of code translates to “Run the <code>make_labels</code> function from the <code>baRcodeR</code> library”. This method is convenient if you just want to use one function from a large library.</p>
<blockquote class="blockquote">
<p>Don’t forget to install a package that you want to use by either method.</p>
</blockquote>
<p>Another reason to go with the second method is that some packages have <strong>functions with the same names</strong>. Let’s say you load two packages <code>pkgA</code> and <code>pkgB</code> that have different functions but both are called <code>cor</code>. When you run the <code>cor</code> function, R will assume you want the one from whichever package was most recently loaded using the <code>library()</code> function.</p>
<p>To avoid confusion, you can use the second method to specify which function to run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>pkgA<span class="sc">::</span><span class="fu">cor</span>()</span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a>pkgB<span class="sc">::</span><span class="fu">cor</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>Did you run the above code? You should still be typing along, in which case you will see the error created when you try to use a package that is not installed on your computer.</p>
</blockquote>
<section id="library-vs-package" class="level4">
<h4 class="anchored" data-anchor-id="library-vs-package">Library <em>vs</em> Package</h4>
<p>The terms <strong>library</strong> and <strong>package</strong> are often used interchangeably. Technically, the <strong>package</strong> is the collection of functions whereas the <strong>library</strong> is the specific folder where the R packages are stored. A library may contain more than one package.</p>
<p>For the most part, you just need to know that a package and a library are a collection of functions.</p>
</section>
</section>
</section>
<section id="readable-code" class="level2">
<h2 class="anchored" data-anchor-id="readable-code">Readable Code</h2>
<p>Now that you’ve learned how to code, let’s take a few minutes to think about best practices. It’s important to make your code readable and interpretable by collaborators, peer reviewers, and yourself 6 months from now. There are lots of opinions on this but here are a few basic suggestions:</p>
<ol type="1">
<li>Add documentation to explain what you are doing</li>
<li>Add spacing between parameters to improve readability</li>
<li>Add spacing on either side of <code>&lt;-</code> when making objects</li>
<li>Break long functions into multiple lines; add the line break after a comma to ensure that the function will run properly:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Function</span>(<span class="at">line=</span><span class="dv">1</span>,</span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">line=</span><span class="dv">2</span>,</span>
<span id="cb216-3"><a href="#cb216-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">line=</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li>Include a list of variables and an overview at the top of your code, or in a separate file for larger projects.</li>
<li>Follow these additional suggestions for names:</li>
</ol>
<ul>
<li>Try to keep your names short and concise but meaningful</li>
<li>Use underscore <code>_</code> or capital letters in your object names to improve readability</li>
<li>Always start object names with a letter, never a number or symbol</li>
<li>Avoid symbols completely</li>
</ul>
<table class="table">
<thead>
<tr class="header">
<th>Bad</th>
<th>Good</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>sum(X,na.rm=T)</code></td>
<td><code>sum(X, na.rm=T)</code></td>
</tr>
<tr class="even">
<td><code>X</code></td>
<td><code>Mass</code></td>
</tr>
<tr class="odd">
<td><code>Days.To.First.Flower</code></td>
<td><code>Flwr_Days</code> or <code>FDays</code></td>
</tr>
<tr class="even">
<td><code>10d.Height</code></td>
<td><code>Ht10d</code></td>
</tr>
<tr class="odd">
<td><code>Length*Width</code></td>
<td><code>LxW</code></td>
</tr>
</tbody>
</table>
<p>Break up longer code across multiple lines:</p>
<p>Bad:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a>MyObject<span class="ot">&lt;-</span><span class="fu">cor</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="cn">NA</span>,<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">8</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">3</span>,<span class="cn">NA</span>),...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Good:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a>MyObject <span class="ot">&lt;-</span> <span class="fu">cor</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="cn">NA</span>,<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">8</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>),</span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">3</span>,<span class="cn">NA</span>),</span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">method=</span><span class="st">"spearman"</span>, <span class="at">na.rm=</span>T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To take your code to the next level, look into the <em>Tidyverse Style Guide</em>: <a href="https://style.tidyverse.org/index.html" class="uri"><em>https://style.tidyverse.org/index.html</em></a></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>R Crash Course for Biologists</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p><a href="https://EcoEvoGeno.org/">Robert I Colautti</a></p>
</div>
  </div>
</footer>




</body></html>